<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Android Enterprise Device Owner ADB provisioning | Nosari20</title>
<meta name=description content="How to provision Device Owner using ADB?"><meta name=author content="Florent NOSARI"><meta name=google-site-verification content="l3oU_IprnsBv0fmr4tY7n9XdxnmZ0oum0x1GeGe5hkI"><meta property="og:url" content="https://nosari20.github.io//posts/android-adb-provisioning/"><meta property="og:title" content="Android Enterprise Device Owner ADB provisioning | Nosari20"><meta property="og:author" content="Florent NOSARI"><meta property="og:description" content="How to provision Device Owner using ADB?"><meta property="og:image" content="https://nosari20.github.io//posts/android-adb-provisioning/_og.png"><meta property="og:article:published_time" content="2022-09-02 00:00:00 +0000 UTC"><meta property="og:article:modified_time" content="2023-01-24 00:00:00 +0000 UTC"><meta property="og:type" content="article"><meta name=twitter:card content="summary_large_image"><meta property="twitter:domain" content="nosari20.github.io"><meta property="twitter:url" content="https://nosari20.github.io//posts/android-adb-provisioning/"><meta name=twitter:title content="Android Enterprise Device Owner ADB provisioning | Nosari20"><meta name=twitter:description content="How to provision Device Owner using ADB?"><meta name=twitter:image content="https://nosari20.github.io//posts/android-adb-provisioning/_og.png"><meta name=theme-color content="#302F2A"><link rel=icon href=/images/favicon.png><link rel=stylesheet href="/css/styles.css?v=2.1"><link rel=stylesheet href="/css/print.css?v=1.0" media=print></head><body><nav><div id=nav-toggle><svg width="24" height="24" fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 17h18a1 1 0 01.117 1.993L21 19H3a1 1 0 01-.117-1.993L3 17h18H3zm0-6 18-.002a1 1 0 01.117 1.993l-.117.007L3 13a1 1 0 01-.117-1.993L3 11l18-.002L3 11zm0-6h18a1 1 0 01.117 1.993L21 7H3a1 1 0 01-.117-1.993L3 5h18H3z" fill="#fff"/></svg></div><a href=/><svg width="24" height="24" fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M6.248 16.002c.966.0 1.75.784 1.75 1.75v2.498A1.75 1.75.0 016.248 22H3.75A1.75 1.75.0 012 20.25v-2.498c0-.966.784-1.75 1.75-1.75h2.498zM9.748 18h11.505a.75.75.0 01.102 1.493l-.102.007H9.748a.75.75.0 01-.102-1.493L9.748 18h11.505H9.748zm-3.5-8.999c.966.0 1.75.784 1.75 1.75v2.498a1.75 1.75.0 01-1.75 1.75H3.75A1.75 1.75.0 012 13.249V10.75C2 9.784 2.784 9 3.75 9h2.498zM9.748 11h11.505a.75.75.0 01.102 1.493l-.102.007H9.748a.75.75.0 01-.102-1.493L9.748 11h11.505H9.748zm-3.5-9c.966.0 1.75.784 1.75 1.75v2.498a1.75 1.75.0 01-1.75 1.75H3.75A1.75 1.75.0 012 6.248V3.75C2 2.784 2.784 2 3.75 2h2.498zm3.5 2h11.505a.75.75.0 01.102 1.493l-.102.007H9.748a.75.75.0 01-.102-1.493L9.748 4h11.505H9.748z" fill="#fff"/></svg>
Home
</a><a href=/tags/device-management/><svg width="24" height="24" fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.254 8.003c.967.0 1.75.784 1.75 1.75v9.5a1.75 1.75.0 01-1.75 1.75H3.75A1.75 1.75.0 012 19.253v-9.5c0-.966.784-1.75 1.75-1.75h4.504zm-2.002 9.495h-.5a.75.75.0 100 1.5h.5a.75.75.0 000-1.5zM21.25 16.5a.75.75.0 01.102 1.493L21.25 18H11v-1.5h10.25zM18.25 5c.966.0 1.75.784 1.75 1.75v7.5A1.75 1.75.0 0118.25 16H11V9A2 2 0 009.15 7.006L9 7H4v-.25C4 5.784 4.784 5 5.75 5h12.5z" fill="#fff"/></svg>
Device Management
</a><a href=/tags/dev-scripting/><svg width="24" height="24" fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m8.086 18.611 5.996-14.004a1 1 0 011.878.677l-.04.11-5.996 14.004a1 1 0 01-1.878-.677l.04-.11 5.996-14.004L8.086 18.61zm-5.793-7.318 4-4a1 1 0 011.497 1.32l-.083.094L4.414 12l3.293 3.293a1 1 0 01-1.32 1.498l-.094-.084-4-4a1 1 0 01-.083-1.32l.083-.094 4-4-4 4zm14-4.001a1 1 0 011.32-.083l.093.083 4.001 4.001a1 1 0 01.083 1.32l-.083.095-4.001 3.995a1 1 0 01-1.497-1.32l.084-.095L19.584 12l-3.293-3.294a1 1 0 010-1.414z" fill="#fff"/></svg>
Dev. / Scripting
</a><a href=/tags/misc/><svg width="24" height="24" fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9 4.5v6.238c0 .375-.094.744-.273 1.074L7.54 14h8.922l-1.188-2.188A2.25 2.25.0 0115 10.738V4.5h1A.75.75.0 0016 3H8a.75.75.0 000 1.5h1zm8.275 11H6.725l-1.582 2.915A1.75 1.75.0 006.68 21h10.638a1.75 1.75.0 001.538-2.585L17.275 15.5z" fill="#fff"/></svg>
Misc.</a><footer><p class="footer text-center">Copyright (Â©) 2024 Florent NOSARI</p></footer></nav><section><header>Nosari20</header><article><image class=image-header alt="Android Enterprise Device Owner ADB provisioning" src=/posts/android-adb-provisioning/_header.png><h1><a class=title href=/posts/android-adb-provisioning/>Android Enterprise Device Owner ADB provisioning</a></h3><div class=metadata>Published on: <time datetime=2022-09-02>Sep 2, 2022</time>
- Last update: <time datetime=2023-01-24>Jan 24, 2023</time><div class=meta-url>Url: https://nosari20.github.io/posts/android-adb-provisioning/</div><ul class=tags><li><a href=https://nosari20.github.io/tags/device-management>device-management</a></li><li><a href=https://nosari20.github.io/tags/android>android</a></li><li><a href=https://nosari20.github.io/tags/android-enterprise>android-enterprise</a></li></ul></div><p><h2 id=content>Content</h2><ul><li>Purpose</li><li>Provisioning</li><li>Sources / usefull resources</li></ul><h2 id=purpose>Purpose</h2><p>One day, I had to do some screen capture for the whole enrollment process, but some app screens were protected to prevent screenshots. I found a solution: provision device using <code>adb</code>, enable <code>Developer Options</code> and use <a href=https://github.com/Genymobile/scrcpy>scrcpy</a> to get my device screen on my computer.</p><h2 id=provisioning>Provisioning</h2><ol><li>Initialize device as usual (do not provision the device with standard Anrdoid Enterprise provisioning method)</li><li>Install the DPC client</li><li>Remove all Google accounts on device</li><li>Enable <code>Developper Options</code> and debug mode</li><li>Set the DPC role to the DPC client (cannot be undone or changed) with the following commands:</li></ol><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>adb shell dpm set-device-owner &lt;PROVISIONING_DEVICE_ADMIN_COMPONENT_NAME&gt;
</span></span></code></pre></td></tr></table></div></div><table><thead><tr><th>DPC</th><th>Admin component name</th></tr></thead><tbody><tr><td>MobileIron Cloud</td><td>com.mobileiron.anyware.android/com.mobileiron.polaris.manager.device.AndroidDeviceAdminReceiver</td></tr><tr><td>MobileIron Core</td><td>com.mobileiron/com.mobileiron.receiver.MIDeviceAdmin</td></tr><tr><td>VMware Workspace ONE</td><td>com.airwatch.androidagent/com.airwatch.agent.DeviceAdministratorReceiver</td></tr><tr><td>Android Management API</td><td>com.google.android.apps.work.clouddpc/.receivers.CloudDeviceAdminReceiver (seems to not work)</td></tr><tr><td>Cisco Meraki</td><td>com.meraki.sm/.DeviceAdmin</td></tr><tr><td>Test DPC</td><td>com.afwsamples.testdpc/.DeviceAdminReceiver</td></tr></tbody></table><ol start=6><li>Enroll device with DPC</li></ol><h2 id=sources--usefull-resources>Sources / usefull resources</h2><ul><li><a href=https://documentation.meraki.com/SM/Device_Enrollment/Enabling_Device_Owner_Mode_using_Android_Debug_Bridge_(ADB)>https://documentation.meraki.com/SM/Device_Enrollment/Enabling_Device_Owner_Mode_using_Android_Debug_Bridge_(ADB)</a></li><li><a href=https://developers.google.com/android/management/provision-device>https://developers.google.com/android/management/provision-device</a></li></ul></p></article><div id=comments><script>var commentsDiv,id="2";if(id){let t="https://github.com/nosari20/nosari20.github.io/issues/".concat(id),n="https://api.github.com/repos/nosari20/nosari20.github.io/issues/".concat(id,"/comments");commentsDiv=document.getElementById("comments");let e=new XMLHttpRequest;e.responseType="json",e.open("GET",n),e.setRequestHeader("Accept","application/vnd.github.v3.html+json"),e.send(),e.onload=function(){if(e.status!=200){let e=document.createElement("p");e.innerHTML="<i>Comments for this post yet are not opened yet (or you have GitHub scripts disabled).</i>",commentsDiv.appendChild(e)}else{let n=e.response,s=document.createElement("h2");s.innerHTML="Comments: ".concat(n.length),commentsDiv.appendChild(s);let o=document.createElement("p");o.innerHTML="<i>You can leave a comment using this <a href='".concat(t,"' target='_blank'>GitHub issue</a>.</i>"),commentsDiv.appendChild(o),n.forEach(function(e){let t=document.createElement("div");t.setAttribute("class","gh-comment"),t.innerHTML="".concat("<div class='gh-header'>","<img src='",e.user.avatar_url,"' />","<div style='margin:auto 0;'>","<b><a class='gh-username' href='",e.user.html_url,"' target='_blank'>",e.user.login,e.user.login=="nosari20"?" (OP)":"","</a></b>","<em> on ",new Date(e.created_at).toLocaleString("en"),"</em>","</div>","</div>","<div class='gh-body'>",e.body_html,"</div>"),commentsDiv.appendChild(t)})}},e.onerror=function(){let e=document.createElement("p");e.innerHTML="<i>Some error loading comments.</i>",commentsDiv.appendChild(e)}}</script></div></section><script src="/js/app.js?v=1.0"></script></body></html>